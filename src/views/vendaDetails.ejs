<%- include('./includes/head') %>
<%- include('./includes/menu') %>
<%- include('./includes/nav') %>

<main class="container-fluid parent">
    <% if(general && products){ %>
    <section class="basic infoParent">
      <h3 class="text-center">Venda</h3>
      <div class="parent-content">
        <div class="content left">

          <table class="descricao">
            <tr><th scope="row">ID: <%- general.id_venda %></th scope="row">
                <th scope="row">DATA: <%- new Date(general.data).toLocaleDateString('pt-BR'); %></th scope="row"></tr>
            <tr><td>Itens:</td><td> <%- general.quantidade %> </td></tr>
            <tr><td>Desconto:</td><td>R$<%- general.desconto.toFixed(2) %></td></tr>
            <tr><td>Valor da Compra:</td><td>R$<%- general.total.toFixed(2) %></td></tr>
          </table>
        </div>
        <div class="content">
          <p>VENDEDOR: <%- general.id_usuario %> - <%- general.vendedor %></p>
          <% if(general.cliente) {%>
          <p>CLIENTE: <%- general.cliente %></p>
          <p>CPF: <%- general.cpf %></p>
          <% }else{ %>
            <p>CPF do Cliente: <%- general.cpf %></p>
          <% } %>
        </div>
      </div>
    </section>
    <section class="basic tableParent">
      <h3 class="text-center">Produtos</h3>
      <div class="overflow-auto" style="height:220px"> 
        <div class="table-responsive">
          <table class="table productDetail">
            <thead class="table-dark">
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Nome</th>
                <th scope="col">TIPO</th>
                <th scope="col">Plataforma</th>
                <th scope="col">Quantidade</th>
                <th scope="col">Pre√ßo</th>
              </tr>
            </thead>
            <tbody>
              <% products.forEach(p => { %>
                  <tr>
                    <td><%- p.id_produto %> </td>
                    <td><%- p.nome %> </td>
                    <td><%- p.tipo %> </td>
                    <td><%- p.plataforma %></td>
                    <td><%- p.quantidade %></td>
                    <td>R$<%- p.preco.toFixed(2) %></td>
                  </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    <% } %>
  </main>
<%- include('./includes/footer') %>